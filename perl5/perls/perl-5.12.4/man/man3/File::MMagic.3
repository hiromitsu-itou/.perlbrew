.\" Automatically generated by Pod::Man 2.23 (Pod::Simple 3.14)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "MMagic 3"
.TH MMagic 3 "2006-05-23" "perl v5.12.4" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
File::MMagic \- Guess file type
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
.Vb 2
\&  use File::MMagic;
\&  use FileHandle;
\&
\&  $mm = new File::MMagic; # use internal magic file
\&  # $mm = File::MMagic\->new(\*(Aq/etc/magic\*(Aq); # use external magic file
\&  # $mm = File::MMagic\->new(\*(Aq/usr/share/etc/magic\*(Aq); # if you use Debian
\&  $res = $mm\->checktype_filename("/somewhere/unknown/file");
\&
\&  $fh = new FileHandle "< /somewhere/unknown/file2";
\&  $res = $mm\->checktype_filehandle($fh);
\&
\&  $fh\->read($data, 0x8564);
\&  $res = $mm\->checktype_contents($data);
.Ve
.SH "ABSTRACT"
.IX Header "ABSTRACT"
This perl library uses perl5 objects to guess file type from filename
and/or filehandle.
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fIchecktype_filename()\fR, \fIchecktype_filehandle()\fR and checktype_contents
returns string contains file type with \s-1MIME\s0 mediatype format.
.SH "METHODS"
.IX Header "METHODS"
.IP "File::MMagic\->\fInew()\fR" 4
.IX Item "File::MMagic->new()"
.PD 0
.ie n .IP "File::MMagic\->new( $filename )" 4
.el .IP "File::MMagic\->new( \f(CW$filename\fR )" 4
.IX Item "File::MMagic->new( $filename )"
.PD
Initializes the module. If no filename is given, the magic numbers
stored in File::MMagic are used.
.ie n .IP "$mm\->addSpecials" 4
.el .IP "\f(CW$mm\fR\->addSpecials" 4
.IX Item "$mm->addSpecials"
If a filetype cannot be determined by magic numbers, extra checks are
done based on extra regular expressions which can be defined here. The
first argument should be the filetype, the remaining arguments should
be one or more regular expressions.
.Sp
By default, checks are done for message/news, message/rfc822,
text/html, text/x\-roff.
.ie n .IP "$mm\->removeSpecials" 4
.el .IP "\f(CW$mm\fR\->removeSpecials" 4
.IX Item "$mm->removeSpecials"
Removes special regular expressions. Specify one or more filetypes. If
no filetypes are specified, all special regexps are removed.
.Sp
Returns a hash containing the removed entries.
.ie n .IP "$mm\->addFileExts" 4
.el .IP "\f(CW$mm\fR\->addFileExts" 4
.IX Item "$mm->addFileExts"
If a filetype cannot be determined by magic numbers, extra checks can
be done based on the file extension (actually, a regexp). Two
arguments should be geiven: the filename pattern and the corresponding
filetype.
.Sp
By default, checks are done for application/x\-compress,
application/x\-bzip2, application/x\-gzip, text/html, text/plain
.ie n .IP "$mm\->removeFileExts" 4
.el .IP "\f(CW$mm\fR\->removeFileExts" 4
.IX Item "$mm->removeFileExts"
Remove filename pattern checks. Specify one or more patterns. If no
pattern is specified, all are removed.
.Sp
Returns a hash containing the removed entries.
.ie n .IP "$mm\->addMagicEntry" 4
.el .IP "\f(CW$mm\fR\->addMagicEntry" 4
.IX Item "$mm->addMagicEntry"
Add a new magic entry in the object. The format is same as \fImagic\fR\|(5) file.
.Sp
.Vb 6
\&  Ex.
\&  # Add a entry
\&  $mm\->addMagicEntry("0\etstring\etabc\ettext/abc");
\&  # Add a entry with a sub entry
\&  $mm\->addMagicEntry("0\etstring\etdef\et");
\&  $mm\->addMagicEntry(">10\etstring\etghi\ettext/ghi");
.Ve
.ie n .IP "$mm\->readMagicHandle" 4
.el .IP "\f(CW$mm\fR\->readMagicHandle" 4
.IX Item "$mm->readMagicHandle"
.PD 0
.ie n .IP "$mm\->checktype_filename" 4
.el .IP "\f(CW$mm\fR\->checktype_filename" 4
.IX Item "$mm->checktype_filename"
.ie n .IP "$mm\->checktype_magic" 4
.el .IP "\f(CW$mm\fR\->checktype_magic" 4
.IX Item "$mm->checktype_magic"
.ie n .IP "$mm\->checktype_contents" 4
.el .IP "\f(CW$mm\fR\->checktype_contents" 4
.IX Item "$mm->checktype_contents"
.PD
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
This program is originated from file.kulp that is a production of The
Unix Reconstruction Projct.
   <http://language.perl.com/ppt/index.html>
Copyright (c) 1999 \s-1NOKUBI\s0 Takatsugu <knok@daionet.gr.jp>.
.PP
There is no warranty for the program.
.PP
This product includes software developed by the Apache Group
for use in the Apache \s-1HTTP\s0 server project (http://www.apache.org/).
.PP
License for the program is followed the original software. The license is
below.
.PP
This program is free and open software. You may use, copy, modify, distribute
and sell this program (and any modified variants) in any way you wish,
provided you do not restrict others to do the same, except for the following
consideration.
.PP
I read some of Ian F. Darwin's \s-1BSD\s0 C implementation, to
try to determine how some of this was done since the specification
is a little vague.  I don't believe that this perl version could
be construed as an \*(L"altered version\*(R", but I did grab the tokens for
identifying the hard-coded file types in names.h and copied some of
the man page.
.PP
Here's his notice:
.PP
.Vb 10
\& * Copyright (c) Ian F. Darwin, 1987.
\& * Written by Ian F. Darwin.
\& *
\& * This software is not subject to any license of the American Telephone
\& * and Telegraph Company or of the Regents of the University of California.
\& *
\& * Permission is granted to anyone to use this software for any purpose on
\& * any computer system, and to alter it and redistribute it freely, subject
\& * to the following restrictions:
\& *
\& * 1. The author is not responsible for the consequences of use of this
\& *    software, no matter how awful, even if they arise from flaws in it.
\& *
\& * 2. The origin of this software must not be misrepresented, either by
\& *    explicit claim or by omission.  Since few users ever read sources,
\& *    credits must appear in the documentation.
\& *
\& * 3. Altered versions must be plainly marked as such, and must not be
\& *    misrepresented as being the original software.  Since few users
\& *    ever read sources, credits must appear in the documentation.
\& *
\& * 4. This notice may not be removed or altered.
.Ve
.PP
The following is the Apache License. This program contains the magic file
that derived from the Apache \s-1HTTP\s0 Server.
.PP
.Vb 10
\& * Copyright (c) 1995\-1999 The Apache Group.  All rights reserved.
\& *
\& * Redistribution and use in source and binary forms, with or without
\& * modification, are permitted provided that the following conditions
\& * are met:
\& *
\& * 1. Redistributions of source code must retain the above copyright
\& *    notice, this list of conditions and the following disclaimer.
\& *
\& * 2. Redistributions in binary form must reproduce the above copyright
\& *    notice, this list of conditions and the following disclaimer in
\& *    the documentation and/or other materials provided with the
\& *    distribution.
\& *
\& * 3. All advertising materials mentioning features or use of this
\& *    software must display the following acknowledgment:
\& *    "This product includes software developed by the Apache Group
\& *    for use in the Apache HTTP server project (http://www.apache.org/)."
\& *
\& * 4. The names "Apache Server" and "Apache Group" must not be used to
\& *    endorse or promote products derived from this software without
\& *    prior written permission. For written permission, please contact
\& *    apache@apache.org.
\& *
\& * 5. Products derived from this software may not be called "Apache"
\& *    nor may "Apache" appear in their names without prior written
\& *    permission of the Apache Group.
\& *
\& * 6. Redistributions of any form whatsoever must retain the following
\& *    acknowledgment:
\& *    "This product includes software developed by the Apache Group
\& *    for use in the Apache HTTP server project (http://www.apache.org/)."
\& *
\& * THIS SOFTWARE IS PROVIDED BY THE APACHE GROUP \`\`AS IS\*(Aq\*(Aq AND ANY
\& * EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
\& * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
\& * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE APACHE GROUP OR
\& * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
\& * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
\& * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
\& * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
\& * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
\& * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
\& * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
\& * OF THE POSSIBILITY OF SUCH DAMAGE.
.Ve
.SH "POD ERRORS"
.IX Header "POD ERRORS"
Hey! \fBThe above document had some coding errors, which are explained below:\fR
.IP "Around line 200:" 4
.IX Item "Around line 200:"
You forgot a '=back' before '=head1'
